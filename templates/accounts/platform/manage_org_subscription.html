{% extends 'accounts/platform/base_admin.html' %}

{% block admin_content %}
<div class="max-w-2xl">
    <div class="mb-8">
        <a href="{% url 'accounts:platform_org_list' %}" class="text-xs font-bold text-indigo-600 hover:text-indigo-800 uppercase tracking-widest flex items-center mb-4">
            <svg class="w-4 h-4 mr-1" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path d="M15 19l-7-7 7-7"></path></svg>
            Back to Organizations
        </a>
        <h1 class="text-3xl font-black text-gray-800 tracking-tight">Manage Subscription</h1>
        <p class="text-sm text-gray-500 font-medium">Manually override the subscription tier and status for <strong>{{ organization.name }}</strong>.</p>
    </div>

    <form method="post" class="space-y-8">
        {% csrf_token %}
        
        <div class="bg-white rounded-2xl shadow-sm border border-gray-100 p-8 space-y-6">
            <div>
                <label class="block text-xs font-black text-gray-400 uppercase tracking-widest mb-2">Current Tier</label>
                <select name="plan_id" class="w-full px-4 py-3 bg-gray-50 border border-gray-200 rounded-xl focus:ring-2 focus:ring-indigo-500 outline-none transition font-bold text-gray-800">
                    <option value="">No Plan / Restricted</option>
                    {% for plan in plans %}
                        <option value="{{ plan.id }}" {% if organization.subscription_plan == plan %}selected{% endif %}>
                            {{ plan.name }} (${{ plan.price_monthly }}/mo)
                        </option>
                    {% endfor %}
                </select>
            </div>

            <div>
                <label class="block text-xs font-black text-gray-400 uppercase tracking-widest mb-2">Subscription Status</label>
                <select name="status" class="w-full px-4 py-3 bg-gray-50 border border-gray-200 rounded-xl focus:ring-2 focus:ring-indigo-500 outline-none transition font-bold text-gray-800">
                    <option value="active" {% if organization.subscription_status == 'active' %}selected{% endif %}>Active</option>
                    <option value="inactive" {% if organization.subscription_status == 'inactive' %}selected{% endif %}>Inactive</option>
                    <option value="past_due" {% if organization.subscription_status == 'past_due' %}selected{% endif %}>Past Due</option>
                    <option value="cancelled" {% if organization.subscription_status == 'cancelled' %}selected{% endif %}>Cancelled</option>
                </select>
            </div>
        </div>

        <div class="bg-amber-50 border border-amber-100 p-6 rounded-2xl">
            <div class="flex items-start space-x-3">
                <svg class="w-5 h-5 text-amber-500 mt-0.5" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"></path></svg>
                <div>
                    <p class="text-xs font-bold text-amber-800 uppercase tracking-widest">Admin Override Notice</p>
                    <p class="text-[10px] text-amber-700 font-medium leading-relaxed mt-1">
                        Manual overrides skip standard Paystack billing logic. Use this for VIP accounts, manual bank transfers, or internal testing.
                    </p>
                </div>
            </div>
        </div>

        <button type="submit" class="w-full bg-indigo-600 hover:bg-indigo-700 text-white text-xs font-black uppercase tracking-widest py-4 rounded-xl transition shadow-lg shadow-indigo-100">
            Apply Subscription Override
        </button>
    </form>
</div>
{% endblock %}
